{"version":3,"sources":["webpack:///src/views/banner/index.vue","webpack:///./src/views/banner/index.vue?f6c7","webpack:///./src/views/banner/index.vue"],"names":["banner","name","data","isedit","newlist","dialogTableVisible","category","bannerData","imgUrl","newId","title","type","status","index","rules","required","message","trigger","components","pic","methods","getcategory","_this","this","$axios","get","then","res","changedialog","_this2","addnewid","id","addbanner","ruleForm","_this3","$refs","validate","valid","$message","error","post","code","success","msg","$router","push","getonebaner","_this4","$route","query","savebaner","watch","val","created","views_banner","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","label-width","label","prop","value","callback","$$v","$set","expression","_v","active-value","inactive-value","active-text","inactive-text","size","min","placeholder","_l","cate","key","_id","nativeOn","click","$event","on","width","visible","update:visible","border","property","scopedSlots","_u","fn","scope","src","row","newimg","alt","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/1.3ec9c229164b297f9cd4.js","sourcesContent":["<template>\r\n    <div class=\"addbanner_wraper\">\r\n         <el-card class=\"card_wraper\">\r\n             <el-form\r\n              :model='bannerData'\r\n              label-width=\"100px\"\r\n              :rules=\"rules\" \r\n              ref=\"ruleForm\"\r\n             >\r\n                  <el-form-item \r\n                  label='轮播头图'\r\n                  prop='imgUrl'\r\n                  >\r\n                      <template>\r\n                          <pic v-model=\"bannerData.imgUrl\"></pic>\r\n                      </template>\r\n                  </el-form-item>\r\n\r\n                  <el-form-item\r\n                  label='轮播图标题'\r\n                  prop='title'\r\n                  >\r\n                      <el-input  v-model=\"bannerData.title\"></el-input>\r\n                  </el-form-item>\r\n                  <el-form-item \r\n                   label='显示轮播图'\r\n                  >\r\n                      <el-switch\r\n                            v-model=\"bannerData.status\"\r\n                            active-value='1'\r\n                            inactive-value='0'\r\n                            active-text=\"显示\"\r\n                            inactive-text=\"不显示\">\r\n                            </el-switch>\r\n                  </el-form-item>\r\n                 <el-form-item label='索引'>\r\n                       <el-input-number size=\"small\" v-model=\"bannerData.index\" :min='1'></el-input-number>\r\n                 </el-form-item>\r\n                  <el-form-item\r\n                   label='分类'\r\n                   prop ='type'\r\n                  >\r\n                   <el-select v-model=\"bannerData.type\" placeholder='请选择分类'>\r\n                       <el-option v-for=\"(cate,index) in category\" :key=\"index\"\r\n                       :label='cate.category'\r\n                       :value='cate._id'\r\n                       @click.native=\"changedialog(cate._id)\"\r\n                       >       \r\n                       </el-option>\r\n                   </el-select>\r\n                  </el-form-item>\r\n                  <el-form-item>\r\n                      <el-button class=\"addbtn\" v-if=\"!isedit\" type='primary' @click=\"addbanner('ruleForm')\">\r\n                          添加轮播图\r\n                      </el-button>\r\n                       <el-button type=\"primary\" v-else size=\"small\" @click=\"savebaner()\">保存修改</el-button>\r\n                  </el-form-item>\r\n             </el-form>\r\n         </el-card>\r\n         <el-dialog title=\"新闻列表\"  width='60%' :visible.sync=\"dialogTableVisible\">\r\n                <el-table :data=\"newlist\"\r\n                     border >\r\n                    <el-table-column property=\"author.userName\" label=\"作者\" width=\"150\"></el-table-column>\r\n                    <el-table-column property=\"author.nickName\" label=\"笔名\" width=\"100\"></el-table-column>\r\n                     <el-table-column property=\"title\" label=\"标题\" width=\"200\"></el-table-column>\r\n                     <el-table-column\r\n                       label=\"头图\">\r\n                     <template slot-scope=\"scope\">\r\n                            <img :src=\"scope.row.newimg\" class=\"new_img\" alt=\"\">\r\n                     </template>\r\n                  </el-table-column>\r\n                   <el-table-column\r\n                      label='操作'\r\n                     >\r\n                   <template slot-scope=\"scope\">\r\n                        <el-button type=\"primary\"  size=\"small\" @click=\"addnewid(scope.row._id)\">添加</el-button>\r\n                       \r\n                    </template>\r\n                     \r\n                </el-table-column>\r\n                </el-table>\r\n         </el-dialog>\r\n    </div>\r\n</template>\r\n<script>\r\nimport pic from '../../components/Uploadimg'\r\nexport default\r\n{\r\n    name:'addbanner',\r\n    data(){\r\n       \r\n        return{\r\n            isedit:false,\r\n            newlist:[],\r\n            dialogTableVisible:false,\r\n             category:[],\r\n            bannerData:{\r\n            imgUrl:'',\r\n            newId:'',\r\n            title:'',\r\n            type:'',\r\n            status:'1',\r\n            index:''\r\n        },\r\n        rules:{\r\n            title:[\r\n                { required: true, message:'请输入新闻标题', trigger:'blur' }\r\n            ],\r\n            imgUrl:[\r\n                {required:true ,message:'请上传轮播图头图', trigger:'change'}\r\n            ],\r\n            type:[\r\n                 { required: true, message:'请选择分类', trigger:'change' }\r\n            ]\r\n        }\r\n        }\r\n    },\r\n    components:{\r\n        pic, \r\n    },\r\n    methods:{\r\n          getcategory(){\r\n                this.$axios.get('/category').then(res=>{\r\n                    this.category = res.category\r\n                })\r\n            },\r\n            changedialog(type){\r\n                this.dialogTableVisible = !this.dialogTableVisible\r\n                this.$axios.get('/news/newtype',{type:type}).then(res=>{\r\n                    this.newlist = res.data\r\n                })\r\n            },\r\n            addnewid(id){\r\n                this.bannerData.newId = id \r\n                this.dialogTableVisible = false\r\n            },\r\n            //添加轮播图\r\n            addbanner(ruleForm){\r\n                this.$refs[ruleForm].validate((valid) => {\r\n                if (valid) {\r\n                        this.$axios.post('/banner/addbaner',this.bannerData).then(res=>{\r\n                            if(res.code == 200){\r\n                                this.$message.success({message:res.msg})\r\n                                this.$router.push('/home/bannerlist')\r\n                            }\r\n                        })\r\n                } else {\r\n                    this.$message.error('信息填写不完整')\r\n                    return false;\r\n                }\r\n                });\r\n                \r\n            },\r\n            //获取单个轮播图\r\n            getonebaner(){\r\n                let id = this.$route.query.id\r\n                this.$axios.get(`/banner/${id}`).then(res=>{\r\n                    this.bannerData = res.data\r\n                })\r\n            },\r\n            //修改轮播图\r\n            savebaner(){\r\n\r\n            }\r\n    },\r\n    watch:{\r\n      $route(val){\r\n          if(val.name == 'editbanner')\r\n          {\r\n              this.isedit = true\r\n          }else\r\n          {\r\n              this.isedit = false\r\n              this.bannerData={\r\n                    imgUrl:'',\r\n                    newId:'',\r\n                    title:'',\r\n                    type:'',\r\n                    status:'1',\r\n                    index:''\r\n              }\r\n          }\r\n      }\r\n    },\r\n    created() {\r\n        this.getcategory()\r\n        \r\n        if(this.$route.name =='editbanner')\r\n        {\r\n            this.getonebaner()\r\n            this.isedit = true\r\n        }\r\n    },\r\n}\r\n    \r\n</script>\r\n\r\n<style  scoped lang='scss'>\r\n.addbanner_wraper{\r\n    padding: 20px;\r\n}\r\n.card_wraper{\r\n    padding-right: 400px;\r\n  \r\n}\r\n.addbtn{\r\n    width: 160px;\r\n    margin-top: 20px\r\n}\r\n.new_img{\r\n    height: 50px;\r\n    width: 50px;\r\n    border-radius: 5px;;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/banner/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"addbanner_wraper\"},[_c('el-card',{staticClass:\"card_wraper\"},[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.bannerData,\"label-width\":\"100px\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"轮播头图\",\"prop\":\"imgUrl\"}},[[_c('pic',{model:{value:(_vm.bannerData.imgUrl),callback:function ($$v) {_vm.$set(_vm.bannerData, \"imgUrl\", $$v)},expression:\"bannerData.imgUrl\"}})]],2),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"轮播图标题\",\"prop\":\"title\"}},[_c('el-input',{model:{value:(_vm.bannerData.title),callback:function ($$v) {_vm.$set(_vm.bannerData, \"title\", $$v)},expression:\"bannerData.title\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"显示轮播图\"}},[_c('el-switch',{attrs:{\"active-value\":\"1\",\"inactive-value\":\"0\",\"active-text\":\"显示\",\"inactive-text\":\"不显示\"},model:{value:(_vm.bannerData.status),callback:function ($$v) {_vm.$set(_vm.bannerData, \"status\", $$v)},expression:\"bannerData.status\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"索引\"}},[_c('el-input-number',{attrs:{\"size\":\"small\",\"min\":1},model:{value:(_vm.bannerData.index),callback:function ($$v) {_vm.$set(_vm.bannerData, \"index\", $$v)},expression:\"bannerData.index\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"分类\",\"prop\":\"type\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择分类\"},model:{value:(_vm.bannerData.type),callback:function ($$v) {_vm.$set(_vm.bannerData, \"type\", $$v)},expression:\"bannerData.type\"}},_vm._l((_vm.category),function(cate,index){return _c('el-option',{key:index,attrs:{\"label\":cate.category,\"value\":cate._id},nativeOn:{\"click\":function($event){_vm.changedialog(cate._id)}}})}))],1),_vm._v(\" \"),_c('el-form-item',[(!_vm.isedit)?_c('el-button',{staticClass:\"addbtn\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addbanner('ruleForm')}}},[_vm._v(\"\\n                      添加轮播图\\n                  \")]):_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){_vm.savebaner()}}},[_vm._v(\"保存修改\")])],1)],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"新闻列表\",\"width\":\"60%\",\"visible\":_vm.dialogTableVisible},on:{\"update:visible\":function($event){_vm.dialogTableVisible=$event}}},[_c('el-table',{attrs:{\"data\":_vm.newlist,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"property\":\"author.userName\",\"label\":\"作者\",\"width\":\"150\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"property\":\"author.nickName\",\"label\":\"笔名\",\"width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"property\":\"title\",\"label\":\"标题\",\"width\":\"200\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"头图\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('img',{staticClass:\"new_img\",attrs:{\"src\":scope.row.newimg,\"alt\":\"\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){_vm.addnewid(scope.row._id)}}},[_vm._v(\"添加\")])]}}])})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-9f74c24c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/banner/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-9f74c24c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-9f74c24c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-9f74c24c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/banner/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}